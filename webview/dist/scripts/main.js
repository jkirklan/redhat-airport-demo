var home=function(t,e,a){"use strict";var i={init:function(){this.setDemoMode()},setDemoMode:function(){var e=this;this.flightData=this.getFlightData("true"===localStorage.getItem("delayed")?!0:!1),"true"===localStorage.getItem("demoMode")&&setTimeout(function(){e.flightData=e.getFlightData(!0),t(".current-flight").children().not("#current-flight-tmpl").remove(),e.parseDepartureTime(),e.compileHandlebarsTemplate(),e.checkFlightStatus(),localStorage.setItem("demoMode","false"),localStorage.setItem("delayed","true")},5e3)},getFlightData:function(e){var a,i,o,n=this;return o="/rest/flightStatus/70?demoMode="+e,i=t.ajax({url:o,method:"GET"}),i.done(function(t){a=t,n.parseDepartureTime(),n.compileHandlebarsTemplate(),n.checkFlightStatus(),n.createCouponStorage()}),i.fail(function(t,e){console.log("Request failed: "+e)}),localStorage.setItem("flightData",JSON.stringify(a)),a},compileHandlebarsTemplate:function(){var e=t("#current-flight-tmpl").html(),a=Handlebars.compile(e),i=a(this.flightData);t(".current-flight").append(i)},parseDepartureTime:function(){this.flightData.departureTime=moment(this.flightData.departure).calendar(new Date)},checkFlightStatus:function(){var e=t(".current-flight-departure"),a=t(".current-flight-status");"On Time"===this.flightData.flightStatus?(e.addClass("success-color"),a.addClass("success-bg")):"Delayed"===this.flightData.flightStatus?(e.addClass("failure-color"),a.addClass("failure-bg"),a.addClass("failure-bg-get-coupon"),a.parent().append('<div class="get-coupon">Get Coupon</div>')):"Changed"===this.flightData.flightStatus&&(e.addClass("failure-color"),a.addClass("failure-bg"))},createCouponStorage:function(){localStorage.getItem("coupons")||localStorage.setItem("coupons",JSON.stringify([]))}};return i}(jQuery,window,document),flightDetails=function(t,e,a){"use strict";var i={init:function(){this.flightData=this.getFlightData(),this.parseFlightDate(),this.parseFlightTimes(),this.compileHandlebarsTemplate(),this.checkFlightStatus(),this.checkCouponStatus(),this.saveCouponButtonListener()},getFlightData:function(){var t=JSON.parse(localStorage.getItem("flightData"));return t},compileHandlebarsTemplate:function(){var e=t("#flight-details-tmpl").html(),a=Handlebars.compile(e),i=a(this.flightData);t(".main-container").append(i)},parseFlightDate:function(){this.flightData.flightDate=moment(this.flightData.departure).format("ddd, MMM DD YYYY")},parseFlightTimes:function(){this.flightData.departureTime=moment(this.flightData.departure).format("HH:mm"),this.flightData.arrivalTime=moment(this.flightData.arrival).format("HH:mm"),this.flightData.boardingTime=moment(this.flightData.boarding).format("HH:mm")},checkFlightStatus:function(){var e=t(".flight-status");"On Time"===this.flightData.flightStatus?e.addClass("success-bg"):"Delayed"===this.flightData.flightStatus?e.addClass("failure-bg"):"Changed"===this.flightData.flightStatus&&e.addClass("failure-bg")},checkCouponStatus:function(){var e=t(".coupon-saved-area"),a=t(".coupon-area"),i=JSON.parse(localStorage.getItem("coupons"))||"";i.length?(a.hide(),e.show()):(a.show(),e.hide())},saveCouponButtonListener:function(){var e=this,a=t(".coupon-save-btn"),i=t(".coupon-saved-area"),o=t(".coupon-area");a.on("click",function(){var t=JSON.parse(localStorage.getItem("coupons"));o.hide(),i.show(),t.push(e.flightData),localStorage.setItem("coupons",JSON.stringify(t))})}};return i}(jQuery,window,document),couponList=function(t,e,a){"use strict";var i={init:function(){this.couponData={},this.couponData.coupons=JSON.parse(localStorage.getItem("coupons"))||"",this.compileHandlebarsTemplate()},compileHandlebarsTemplate:function(){var e=t("#coupon-list-tmpl").html(),a=Handlebars.compile(e),i=a(this.couponData);t(".coupon-list-container").append(i)}};return i}(jQuery,window,document),couponDetails=function(t,e,a){"use strict";var i={init:function(){this.couponData=JSON.parse(localStorage.getItem("coupons"))||"",this.getCouponDetails(),this.parseFlightDate(),this.compileHandlebarsTemplate()},getCouponDetails:function(){this.getQueryString("id");this.couponDetails=this.couponData[0]},getQueryString:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),a=e.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},parseFlightDate:function(){this.couponDetails.flightDate=moment(this.couponDetails.departure).format("ddd, MMM DD YYYY")},compileHandlebarsTemplate:function(){var e=t("#coupon-details-tmpl").html(),a=Handlebars.compile(e),i=a(this.couponDetails);t(".coupon-details-container").append(i)}};return i}(jQuery,window,document),admin=function(t,e,a){"use strict";var i={init:function(){this.resetButtonListener(),this.flightTimerButtonListener(),this.resetCouponButtonListener()},resetButtonListener:function(){t(".reset-btn").on("click",function(){localStorage.clear(),alert("Demo has been reset")})},flightTimerButtonListener:function(){t(".timer-btn").on("click",function(){localStorage.setItem("demoMode","true"),alert("Delayed flight timer on")})},resetCouponButtonListener:function(){t(".clear-coupons-btn").on("click",function(){localStorage.removeItem("coupons"),alert("Saved coupons have been cleared")})}};return i}(jQuery,window,document);