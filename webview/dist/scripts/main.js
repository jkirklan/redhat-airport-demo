var home=function(t,e,a){"use strict";var i={init:function(){this.setDemoMode()},setDemoMode:function(){var e=this,a={flightNo:70,airlineCode:"AC",departure:"2015-06-02T12:00",arrival:"2015-06-02T13:45",boarding:"2015-06-02T11:40",startingAirport:"BOS",destinationAirport:"YYZ",startingCity:"Boston",destinationCity:"Toronto",flightStatus:"On Time",startingGate:1,destinationGate:1,coupon:null},i={flightNo:70,airlineCode:"AC",departure:"2015-06-02T12:00",arrival:"2015-06-02T13:45",boarding:"2015-06-02T11:40",startingAirport:"BOS",destinationAirport:"YYZ",startingCity:"Boston",destinationCity:"Toronto",flightStatus:"Delayed",startingGate:1,destinationGate:1,coupon:{id:0,company:"Starbucks",companyCode:"STBK",path:"images/starbucks-coupon.png",offer:"Get 1 Free Starbucks Coffee",description:"Redeem this coupon at any Starbucks Coffee location at Boston Logan International.",delaySeverity:60,statusId:2}};"true"===localStorage.getItem("delayed")?t.when(this.getFlightData(!0)).done(function(t){e.flightData=t,e.updateView()}).fail(function(){e.flightData=i,e.updateView()}):t.when(this.getFlightData(!1)).done(function(t){e.flightData=t,e.updateView()}).fail(function(){e.flightData=a,e.updateView()}),e.createCouponStorage(),"true"===localStorage.getItem("demoMode")&&setTimeout(function(){t.when(e.getFlightData(!0)).done(function(a){e.flightData=a,t(".current-flight").children().not("#current-flight-tmpl").remove(),e.updateView(),localStorage.setItem("demoMode","false"),localStorage.setItem("delayed","true")}).fail(function(){e.flightData=i,t(".current-flight").children().not("#current-flight-tmpl").remove(),e.updateView(),localStorage.setItem("demoMode","false"),localStorage.setItem("delayed","true")})},5e3)},updateView:function(){this.parseDepartureTime(),this.compileHandlebarsTemplate(),this.checkFlightStatus(),localStorage.setItem("flightData",JSON.stringify(this.flightData))},getFlightData:function(e){var a="http://redhatairportdemo-fguanlao.rhcloud.com/rest/flightStatus/70?demoMode="+e;return t.ajax({url:a,method:"GET"})},compileHandlebarsTemplate:function(){var e=t("#current-flight-tmpl").html(),a=Handlebars.compile(e),i=a(this.flightData);t(".current-flight").append(i)},parseDepartureTime:function(){this.flightData.departureTime=moment(this.flightData.departure).calendar(new Date)},checkFlightStatus:function(){var e=t(".current-flight-departure"),a=t(".current-flight-status");"On Time"===this.flightData.flightStatus?(e.addClass("success-color"),a.addClass("success-bg")):"Delayed"===this.flightData.flightStatus?(e.addClass("failure-color"),a.addClass("failure-bg"),a.addClass("failure-bg-get-coupon"),a.parent().append('<div class="get-coupon">Get Coupon</div>')):"Changed"===this.flightData.flightStatus&&(e.addClass("failure-color"),a.addClass("failure-bg"))},createCouponStorage:function(){localStorage.getItem("coupons")||localStorage.setItem("coupons",JSON.stringify([]))}};return i}(jQuery,window,document),flightDetails=function(t,e,a){"use strict";var i={init:function(){this.flightData=this.getFlightData(),this.parseFlightDate(),this.parseFlightTimes(),this.compileHandlebarsTemplate(),this.checkFlightStatus(),this.checkCouponStatus(),this.saveCouponButtonListener()},getFlightData:function(){var t=JSON.parse(localStorage.getItem("flightData"));return t},compileHandlebarsTemplate:function(){var e=t("#flight-details-tmpl").html(),a=Handlebars.compile(e),i=a(this.flightData);t(".main-container").append(i)},parseFlightDate:function(){this.flightData.flightDate=moment(this.flightData.departure).format("ddd, MMM DD YYYY")},parseFlightTimes:function(){this.flightData.departureTime=moment(this.flightData.departure).format("HH:mm"),this.flightData.arrivalTime=moment(this.flightData.arrival).format("HH:mm"),this.flightData.boardingTime=moment(this.flightData.boarding).format("HH:mm")},checkFlightStatus:function(){var e=t(".flight-status");"On Time"===this.flightData.flightStatus?e.addClass("success-bg"):"Delayed"===this.flightData.flightStatus?e.addClass("failure-bg"):"Changed"===this.flightData.flightStatus&&e.addClass("failure-bg")},checkCouponStatus:function(){var e=t(".coupon-saved-area"),a=t(".coupon-area"),i=JSON.parse(localStorage.getItem("coupons"))||"";i.length?(a.hide(),e.show()):(a.show(),e.hide())},saveCouponButtonListener:function(){var e=this,a=t(".coupon-save-btn"),i=t(".coupon-saved-area"),o=t(".coupon-area");a.on("click",function(){var t=JSON.parse(localStorage.getItem("coupons"));o.hide(),i.show(),t.push(e.flightData),localStorage.setItem("coupons",JSON.stringify(t))})}};return i}(jQuery,window,document),couponList=function(t,e,a){"use strict";var i={init:function(){this.couponData={},this.couponData.coupons=JSON.parse(localStorage.getItem("coupons"))||"",this.compileHandlebarsTemplate()},compileHandlebarsTemplate:function(){var e=t("#coupon-list-tmpl").html(),a=Handlebars.compile(e),i=a(this.couponData);t(".coupon-list-container").append(i)}};return i}(jQuery,window,document),couponDetails=function(t,e,a){"use strict";var i={init:function(){this.couponData=JSON.parse(localStorage.getItem("coupons"))||"",this.getCouponDetails(),this.parseFlightDate(),this.compileHandlebarsTemplate()},getCouponDetails:function(){var t=parseInt(this.getQueryString("id"));this.couponDetails=this.couponData[t]},getQueryString:function(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),a=e.exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},parseFlightDate:function(){this.couponDetails.flightDate=moment(this.couponDetails.departure).format("ddd, MMM DD YYYY")},compileHandlebarsTemplate:function(){var e=t("#coupon-details-tmpl").html(),a=Handlebars.compile(e),i=a(this.couponDetails);t(".coupon-details-container").append(i)}};return i}(jQuery,window,document),admin=function(t,e,a){"use strict";var i={init:function(){this.resetButtonListener(),this.flightTimerButtonListener(),this.resetCouponButtonListener()},resetButtonListener:function(){t(".reset-btn").on("click",function(){localStorage.clear(),alert("Demo has been reset")})},flightTimerButtonListener:function(){t(".timer-btn").on("click",function(){localStorage.setItem("demoMode","true"),alert("Delayed flight timer on")})},resetCouponButtonListener:function(){t(".clear-coupons-btn").on("click",function(){localStorage.removeItem("coupons"),alert("Saved coupons have been cleared")})}};return i}(jQuery,window,document);